"use strict";(self.webpackChunkmolstar_clj=self.webpackChunkmolstar_clj||[]).push([[806,772],{7806:(e,t,i)=>{i.r(t),i.d(t,{MODULE_NAME:()=>s.p,MODULE_VERSION:()=>s.e,MolViewer:()=>o.y,MolViewerFactory:()=>o.f,ViewerModel:()=>n.ViewerModel,ViewerView:()=>n.ViewerView});var s=i(4234),n=i(3772),o=i(9597)},9597:(e,t,i)=>{i.d(t,{f:()=>a,y:()=>l});var s=i(2607),n=i(9994),o=i(7262),r=i(5256);const d=i(383);class l extends r.Widget{constructor(e){super(),this.rendered=!1,this._ready=new o.PromiseDelegate,this.context=e,this.node.tabIndex=0,this.addClass("jp-MolViewer"),this.stage_obj=new d.Stage(this.node,{backgroundColor:"white"}),document.body.appendChild(this.stage_obj.tooltip),e.ready.then((()=>{this.isDisposed||this._render()}))}[s.Printing.symbol](){return()=>s.Printing.printWidget(this)}get ready(){return this._ready.promise}dispose(){super.dispose()}onUpdateRequest(e){!this.isDisposed&&this.context.isReady&&this._render()}onActivateRequest(e){this.node.focus()}onResize(e){this.stage_obj.setSize(Math.floor(e.width)+"px",Math.floor(e.height)+"px")}addElement(e){Object.assign(e.style,{position:"absolute",zIndex:10}),this.stage_obj.viewer.container.appendChild(e)}createElement(e,t,i){var s=document.createElement(e);return Object.assign(s,t),Object.assign(s.style,i),s}updateInfo(e,t){if(e.setSelection("/"+t),this.info.innerHTML='<dt style="font-weight: bold;">Title</dt><dd>'+e.structure.title+'</dd><dt style="font-weight: bold;">Index</dt><dd>'+t+"</dd>",e.structure.extraData.sdf&&e.structure.extraData.sdf[t]){var i=e.structure.extraData.sdf[t];for(const e in i)this.info.innerHTML+='<dt style="font-weight: bold;">'+e+"</dt><dd><div>"+i[e].join("</div><div>")+"</div></dd>"}}_render(){this.rendered||(this.rendered=!0,this.context.urlResolver.getDownloadUrl(this.context.path).then((e=>{this.stage_obj.loadFile(e).then((e=>{if(e.structure.modelStore.count>1){var t=this.createElement("input",{type:"range",value:0,min:0,max:e.structure.modelStore.count-1,step:1},{top:"12px",left:"12px"});this.info=this.createElement("dl",{},{top:"36px",left:"12px"}),t.oninput=t=>{this.updateInfo(e,t.target.value)},this.addElement(t),this.addElement(this.info),this.updateInfo(e,0)}this.context.path.match(/\.(mol2|sdf?)$/)?e.addRepresentation("ball+stick"):e.addRepresentation("ribbon",{colorScheme:"residueindex"}),e.autoView()}))})))}}class a extends n.ABCWidgetFactory{createNewWidget(e){const t=new l(e);return new n.DocumentWidget({content:t,context:e})}}},4234:(e,t,i)=>{i.d(t,{e:()=>n,p:()=>o});const s=i(8330),n=s.version,o=s.name},3772:(e,t,i)=>{i.r(t),i.d(t,{ViewerModel:()=>x,ViewerView:()=>j});var s=i(5580),n=i(4234),o=i(5072),r=i.n(o),d=i(7825),l=i.n(d),a=i(7659),c=i.n(a),p=i(5056),h=i.n(p),u=i(540),m=i.n(u),_=i(1113),w=i.n(_),v=i(4930),g={};g.styleTagTransform=w(),g.setAttributes=h(),g.insert=c().bind(null,"head"),g.domAPI=l(),g.insertStyleElement=m(),r()(v.A,g),v.A&&v.A.locals&&v.A.locals;var b=i(30);i(530);class y{constructor(e,t,i){this._model_views=new Map,this._handler_context=i||this,this._create_view=e,this._remove_view=t||function(e){e.remove()}}async update(e){for(let[t,i]of this._model_views)e.includes(t)||(this._remove_view.call(this._handler_context,i),this._model_views.delete(t));let t=[];for(let i of e)if(!this._model_views.has(i)){let e=await this._create_view.call(this._handler_context,i);t.push(e),this._model_views.set(i,e)}return t}remove(){for(let e of this._model_views.values())this._remove_view.call(this._handler_context,e);this._model_views.clear()}dispose(){this._model_views.clear()}}const f=i(5580);class x extends s.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"ViewerModel",_model_module:n.p,_model_module_version:n.e,_view_name:"ViewerView",_view_module:n.p,_view_module_version:n.e}}}x.serializers={components:{deserialize:f.unpack_models},...s.DOMWidgetModel.serializers};class j extends s.DOMWidgetView{constructor(){super(...arguments),this._focused=!1,this.isLeader=!1,this.in_components_changing=!1}initialize(e){super.initialize(e),this.componentViews=new y(this.create_molstar_child_view,this.remove_molstar_child_view,this)}async render(){super.render(),this.displayed.then((()=>{this.el.classList.add("molstar-stage"),this.el.classList.add("jupyter-widgets"),this.el.setAttribute("data-jp-suppress-context-menu",""),this.viewer_container=document.createElement("div"),this.el.appendChild(this.viewer_container),b.jM.create(this.viewer_container,{layoutIsExpanded:!0,layoutShowControls:!1,layoutShowRemoteState:!1,layoutShowSequence:!0,layoutShowLog:!1,layoutShowLeftPanel:!0,viewportShowExpand:!0,viewportShowSelectionMode:!1,viewportShowAnimation:!1,pdbProvider:"rcsb",emdbProvider:"rcsb"}).then((e=>{this.viewer_obj=e,e.loadPdb("7bv2"),e.loadEmdb("EMD-30210",{detail:6})}))}))}processLuminoMessage(e){super.processLuminoMessage(e)}create_molstar_child_view(e){return this.create_child_view(e,{viewer_obj:this.viewer_obj})}remove_molstar_child_view(e){e.remove()}}},4930:(e,t,i)=>{i.d(t,{A:()=>d});var s=i(1601),n=i.n(s),o=i(6314),r=i.n(o)()(n());r.push([e.id,"/*.jupyter-widgets.molstar-viewer {\n  height: 480px;\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n  flex: 1 1 auto;\n}\n\n.jupyter-widgets.molstar-viewer > div {\n  position: absolute !important;\n  x: 0;\n  y: 0;\n}\n*/\n",""]);const d=r},8330:e=>{e.exports=JSON.parse('{"name":"molstar-clj","version":"0.1.0","description":"A Mol* Widget for Common Lisp Jupyter","keywords":["molstar","jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["{dist}/**/*.{js,ts,map}","css/*.css","LICENSE.md"],"homepage":"https://github.com/cando-developers/molstar-clj","bugs":{"url":"https://github.com/cando-developers/molstar-clj/issues"},"license":"MIT","author":{"name":"Tarn W. Burton","email":"twburton@gmail.com"},"main":"dist/index.js","types":"./dist/index.d.ts","repository":{"type":"git","url":"https://github.com/cando-developers/molstar-clj"},"scripts":{"build":"tsc && jupyter-labextension build","lint":"eslint . --ext .ts --fix","lint-check":"eslint . --ext .ts","prepack":"yarn run build"},"dependencies":{"@jupyter-widgets/base":"^6.0.4","case":"^1.6.3","fp-ts":"^2.16.9","fs":"^0.0.1-security","molstar":"4.5.0","ngl":"2.3.1"},"devDependencies":{"@jupyterlab/application":"^4.0.1","@jupyterlab/builder":"^4.0.1","@types/node":"^20.2.5","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^5.27.0","eslint":"^8.16.0","eslint-config-standard":"^17.0.0","eslint-plugin-import":"^2.22.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^5.0.0","eslint-plugin-promise":"^6.0.0","eslint-plugin-standard":"^5.0.0","lint-staged":"^13.0.3","typescript":"^5.1.3"},"jupyterlab":{"extension":"dist/plugin","outputDir":"prebuilt","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}},"lint-staged":{"*.ts":["eslint . --ext .ts --fix"]},"prettier":{"singleQuote":true}}')}}]);