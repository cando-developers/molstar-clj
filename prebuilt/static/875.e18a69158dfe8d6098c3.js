"use strict";(self.webpackChunkmolstar_clj=self.webpackChunkmolstar_clj||[]).push([[875],{59597:(e,t,i)=>{i.d(t,{f:()=>d,y:()=>l});var s=i(52607),n=i(39994),a=i(67262),o=i(35256);const r=i(383);class l extends o.Widget{constructor(e){super(),this.rendered=!1,this._ready=new a.PromiseDelegate,this.context=e,this.node.tabIndex=0,this.addClass("jp-MolViewer"),this.stage_obj=new r.Stage(this.node,{backgroundColor:"white"}),document.body.appendChild(this.stage_obj.tooltip),e.ready.then((()=>{this.isDisposed||this._render()}))}[s.Printing.symbol](){return()=>s.Printing.printWidget(this)}get ready(){return this._ready.promise}dispose(){super.dispose()}onUpdateRequest(e){!this.isDisposed&&this.context.isReady&&this._render()}onActivateRequest(e){this.node.focus()}onResize(e){this.stage_obj.setSize(Math.floor(e.width)+"px",Math.floor(e.height)+"px")}addElement(e){Object.assign(e.style,{position:"absolute",zIndex:10}),this.stage_obj.viewer.container.appendChild(e)}createElement(e,t,i){var s=document.createElement(e);return Object.assign(s,t),Object.assign(s.style,i),s}updateInfo(e,t){if(e.setSelection("/"+t),this.info.innerHTML='<dt style="font-weight: bold;">Title</dt><dd>'+e.structure.title+'</dd><dt style="font-weight: bold;">Index</dt><dd>'+t+"</dd>",e.structure.extraData.sdf&&e.structure.extraData.sdf[t]){var i=e.structure.extraData.sdf[t];for(const e in i)this.info.innerHTML+='<dt style="font-weight: bold;">'+e+"</dt><dd><div>"+i[e].join("</div><div>")+"</div></dd>"}}_render(){this.rendered||(this.rendered=!0,this.context.urlResolver.getDownloadUrl(this.context.path).then((e=>{this.stage_obj.loadFile(e).then((e=>{if(e.structure.modelStore.count>1){var t=this.createElement("input",{type:"range",value:0,min:0,max:e.structure.modelStore.count-1,step:1},{top:"12px",left:"12px"});this.info=this.createElement("dl",{},{top:"36px",left:"12px"}),t.oninput=t=>{this.updateInfo(e,t.target.value)},this.addElement(t),this.addElement(this.info),this.updateInfo(e,0)}this.context.path.match(/\.(mol2|sdf?)$/)?e.addRepresentation("ball+stick"):e.addRepresentation("ribbon",{colorScheme:"residueindex"}),e.autoView()}))})))}}class d extends n.ABCWidgetFactory{createNewWidget(e){const t=new l(e);return new n.DocumentWidget({content:t,context:e})}}},93875:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u,molstarToken:()=>c});var s=i(50974),n=i(67262),a=i(52607),o=i(59597),r=i(95580),l=i(94234);const d="molstar-clj:plugin",c=new n.Token(d),p=[{displayName:"Crystallographic Information File",name:"cif",mimeTypes:["chemical/x-cif"],extensions:[".cif"]},{displayName:"Macromolecular Crystallographic Information File",name:"mmcif",mimeTypes:["chemical/x-mmcif"],extensions:[".mmcif"]},{displayName:"Tripos Mol2",name:"mol2",extensions:[".mol2"]},{displayName:"Protein Data Bank File",name:"pdb",mimeTypes:["chemical/x-pdb"],extensions:[".pdb",".pqr",".ent"]},{displayName:"MDL Molfile",name:"mol",mimeTypes:["chemical/x-mdl-molfile"],extensions:[".mol"]},{displayName:"Structure Data File",name:"sdf",mimeTypes:["chemical/x-mdl-sdfile"],extensions:[".sdf",".sd"]}],m="Molecule Viewer",u={id:d,provides:c,requires:[r.IJupyterWidgetRegistry],optional:[a.ICommandPalette,s.ILayoutRestorer],activate:function(e,t,s,n){t.registerWidget({name:l.p,version:l.e,exports:async()=>({...await Promise.all([i.e(913),i.e(903)]).then(i.bind(i,26404))})}),p.forEach((t=>e.docRegistry.addFileType(t)));const r=p.map((e=>e.name)),d=new o.f({name:m,fileTypes:r,defaultFor:r,readOnly:!0});e.docRegistry.addWidgetFactory(d),d.widgetCreated.connect((function(t,i){var s,n;i.context.pathChanged.connect((()=>{c.save(i)})),c.add(i);const a=e.docRegistry.getFileTypesForPath(i.context.path);a.length>0&&(i.title.icon=a[0].icon,i.title.iconClass=null!==(s=a[0].iconClass)&&void 0!==s?s:"",i.title.iconLabel=null!==(n=a[0].iconLabel)&&void 0!==n?n:"")}));const c=new a.WidgetTracker({namespace:"molstar-clj"});return n&&n.restore(c,{command:"docmanager:open",args:e=>({path:e.context.path,factory:m}),name:e=>e.context.path}),c},autoStart:!0}},94234:(e,t,i)=>{i.d(t,{e:()=>n,p:()=>a});const s=i(8330),n=s.version,a=s.name},8330:e=>{e.exports=JSON.parse('{"name":"molstar-clj","version":"0.1.0","description":"A Mol* Widget for Common Lisp Jupyter","keywords":["molstar","jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["{dist}/**/*.{js,ts,map}","css/*.css","LICENSE.md"],"homepage":"https://github.com/cando-developers/molstar-clj","bugs":{"url":"https://github.com/cando-developers/molstar-clj/issues"},"license":"MIT","author":{"name":"Tarn W. Burton","email":"twburton@gmail.com"},"main":"dist/index.js","types":"./dist/index.d.ts","repository":{"type":"git","url":"https://github.com/cando-developers/molstar-clj"},"scripts":{"build":"tsc && jupyter-labextension build","lint":"eslint . --ext .ts --fix","lint-check":"eslint . --ext .ts","prepack":"yarn run build"},"dependencies":{"@jupyter-widgets/base":"^6.0.4","case":"^1.6.3","fp-ts":"^2.16.9","fs":"^0.0.1-security","molstar":"4.5.0","ngl":"2.3.1"},"devDependencies":{"@jupyterlab/application":"^4.0.1","@jupyterlab/builder":"^4.0.1","@types/node":"^20.2.5","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^5.27.0","eslint":"^8.16.0","eslint-config-standard":"^17.0.0","eslint-plugin-import":"^2.22.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^5.0.0","eslint-plugin-promise":"^6.0.0","eslint-plugin-standard":"^5.0.0","lint-staged":"^13.0.3","typescript":"^5.1.3"},"jupyterlab":{"extension":"dist/plugin","outputDir":"prebuilt","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}},"lint-staged":{"*.ts":["eslint . --ext .ts --fix"]},"prettier":{"singleQuote":true}}')}}]);